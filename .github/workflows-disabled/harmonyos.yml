name: ðŸ¦‹ Build HarmonyOS

on:
  workflow_dispatch:
  # æš‚æ—¶æ‰‹åŠ¨è§¦å‘ï¼Œç­‰å¾…é¸¿è’™çŽ¯å¢ƒå®Œå–„

jobs:
  build-harmonyos:
    runs-on: ubuntu-latest
    
    steps:
      - name: ðŸ“¦ Checkout repository
        uses: actions/checkout@v4
        with:
          submodules: recursive
      
      - name: ðŸŸ¢ Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18'
          cache: 'npm'
      
      - name: ðŸ“± Install dependencies
        run: npm ci
      
      # æ³¨æ„ï¼šé¸¿è’™æž„å»ºç›®å‰éœ€è¦ç‰¹æ®ŠçŽ¯å¢ƒï¼Œè¿™é‡Œæä¾›æ¡†æž¶
      - name: ðŸ¦‹ Prepare HarmonyOS build environment
        run: |
          echo "## ðŸ¦‹ HarmonyOS Build Status" >> $GITHUB_STEP_SUMMARY
          echo "âš ï¸ **Status**: Environment setup required" >> $GITHUB_STEP_SUMMARY
          echo "ðŸ“‹ **Requirements**:" >> $GITHUB_STEP_SUMMARY
          echo "- DevEco Studio 4.0+" >> $GITHUB_STEP_SUMMARY
          echo "- HarmonyOS SDK" >> $GITHUB_STEP_SUMMARY
          echo "- React Native HarmonyOS adapter" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "ðŸ”— **Resources**:" >> $GITHUB_STEP_SUMMARY
          echo "- [HarmonyOS Developer Portal](https://developer.harmonyos.com/)" >> $GITHUB_STEP_SUMMARY
          echo "- [React Native HarmonyOS](https://gitee.com/react-native-oh/usage-docs)" >> $GITHUB_STEP_SUMMARY
          
      - name: ðŸ“‹ Generate HarmonyOS build instructions
        run: |
          mkdir -p harmonyos-build
          cat > harmonyos-build/README.md << 'EOF'
          # ðŸ¦‹ HarmonyOS æž„å»ºè¯´æ˜Ž
          
          ## çŽ¯å¢ƒè¦æ±‚
          
          1. **DevEco Studio 4.0+**
             - ä¸‹è½½åœ°å€ï¼šhttps://developer.harmonyos.com/cn/develop/deveco-studio
          
          2. **HarmonyOS SDK**
             - åœ¨DevEco Studioä¸­å®‰è£…æœ€æ–°SDK
          
          3. **React Native HarmonyOS**
             ```bash
             npm install @react-native-oh/react-native-harmony
             ```
          
          ## æž„å»ºæ­¥éª¤
          
          1. åœ¨DevEco Studioä¸­å¯¼å…¥é¡¹ç›®
          2. é…ç½®HarmonyOSçŽ¯å¢ƒ
          3. è¿è¡Œæž„å»ºå‘½ä»¤ï¼š
             ```bash
             hvigor assembleApp
             ```
          
          ## è¾“å‡ºæ–‡ä»¶
          
          - `app-debug.hap` - Debugç‰ˆæœ¬
          - `app-release.hap` - Releaseç‰ˆæœ¬
          
          EOF
          
      - name: ðŸ“¤ Upload HarmonyOS instructions
        uses: actions/upload-artifact@v4
        with:
          name: HarmonyOS-Build-Instructions
          path: harmonyos-build/README.md
          retention-days: 30 